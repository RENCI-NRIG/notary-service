{% extends 'base.html' %}
{% load static dataset_tags replace_tags %}

{% block title %}Infrastructure for Privacy-Assured CompuTations{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        <div class="container">
            <div class="post">
                <form method="POST" class="post-form">
                    <h2>{{ message.subject }}
                        {% csrf_token %}
                        <input style="font-family: FontAwesome;color: green;
                                border: none; background: none" name="return-to-list"
                               title="Return to list" value="&#xf04a;" type="submit">
                        {% if message.is_active %}
                            <input style="font-family: FontAwesome;color: #B22222;
                                border: none; background: none" name="delete-message"
                                   title="Move message to trash" value="&#xf1f8;" type="submit">
                        {% else %}
                            <input style="font-family: FontAwesome;color: #B22222;
                                border: none; background: none" name="delete-message"
                                   title="Delete message" value="&#xf00d;" type="submit">
                        {% endif %}
                        <input type="hidden" name="remove_message_uuid" value="{{ message.uuid }}">
                    </h2>
                </form>
                <p>{{ message.body|linebreaksbr }}</p>
                {% if not message.is_active %}
                    <br>
                    <form method="POST" class="post-form">
                        {% csrf_token %}
                        <input type="submit" name="undelete-message" value="Make active" style="color: green">
                    </form>
                {% endif %}
            </div>
            <br>
            <table class="table table-striped table-bordered">
                <tr>
                    <td style="width: 20%">
                        <b>Reference URL</b>
                    </td>
                    <td>
                        <a href="{{ message.reference_url }}">
                            {{ message.reference_url }}
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Created By</b>
                    </td>
                    <td>
                        {{ message.created_by }}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Modified By</b>
                    </td>
                    <td>
                        {{ message.modified_by }}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Created Date</b>
                    </td>
                    <td>
                        {{ message.created_date|date:"m/d/Y g:i a" }}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Modified Date</b>
                    </td>
                    <td>
                        {{ message.modified_date|date:"m/d/Y g:i a" }}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Active or Not</b>
                    </td>
                    <td>
                        {{ message.is_active }}
                        {% if message.is_active %}
                            (<i class="fa fa-fw fa-check text-success"></i>)
                        {% else %}
                            (<i class="fa fa-fw fa-remove text-danger"></i>)
                        {% endif %}
                    </td>
                </tr>
            </table>
        </div>
    {% else %}
        <div class="container">
            <p>You are not currently logged in or not authorized to view this page</p>
        </div>
    {% endif %}
{% endblock %}